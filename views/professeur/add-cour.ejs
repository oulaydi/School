<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head.ejs') %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/public/css/forms.css" />
    <link rel="stylesheet" href="/css/student.css" />
    <link rel="stylesheet" href="/css/add-teacher.css" />
  </head>
  <body>
    <!-- Header -->    
    <%- include('../partials/header.ejs') %>
    <!-- Header Ends!! -->
    <div class="center-container">
      <% if (messages.success) { %>
          <div class="alert alert-success"><%= messages.success %></div>
      <% } %>
      <% if (messages.error) { %>
          <div class="alert alert-danger"><%= messages.error %></div>
      <% } %>
      <div>
        <h3 id="h4"> Ajouter Cour </h3>
      </div>
     <a href="/cour" title="إلفاء" id="cancel" class="mt-5"><button type="button" class="btn-close" aria-label="Close" style="margin-left: 13px;"></button></a> 
     <div class="container my-5" dir="rtl">
          <form action="/add-cour" class="row g-3" autocomplete="off" method="POST">
            <div class="col-md-6">
              <label class="form-label cus-label" > Nom du Cour </label><span> :</span>
              <input type="text" name="name_cour" required placeholder="اسم المادة" id="input-field" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label cus-label" > Nom du Module </label><span> :</span>
              <select class="form-select" aria-label="Default select example" id="input-field" name="module">
                <% Modules.forEach(Module => { %>
                <option value="<%= Module.name_module %>"><%= Module.name_module %></option>
                <% }) %>
              </select>
            </div>
           <div>
            <!-- actual upload which is hidden -->
            <input type="file" id="actual-btn" hidden/>

            <!-- our custom upload button -->
            <label for="actual-btn" class="btn w-25 btn-primary">Choose File</label>

            <!-- name of file chosen -->
            <span id="file-chosen">No file chosen</span>
          </div> 
        
            <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="customCheck1" required>
                <label class="custom-control-label" for="customCheck1">اشهد على صحة المعلومات المصرح بها</label>
            </div>
              <form id="uploadForm" action="/api/upload" method="post" enctype="multipart/form-data">
                <input type="file" name="file" required>
                <button type="submit" class="btn w-25 btn-primary">إضافة</button>
              </form>
          </form>
      </div>
    </div>
    <script>
      document.getElementById('downloadButton').addEventListener('click', async () => {
            const filename = document.getElementById('filename').value;
            const response = await fetch(`/api/download/${filename}`);
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            a.remove();
        });
      const actualBtn = document.getElementById('actual-btn');
      const fileChosen = document.getElementById('file-chosen');
      actualBtn.addEventListener('change', function(){
        fileChosen.textContent = this.files[0].name
      });
    </script> 
                    
    <!-- footer --->
    <%- include('../partials/footer.ejs') %>
    <!-- footer ends -->
  </body>
</html>
